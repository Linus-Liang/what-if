<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>What-If</title>
  </head>
  <body>
    <div id="tables">
      <table>
        <tbody>
          <tr style="text-align: center;">
            <td><h5>Category</h5></td>
            <td><h5>Earned Points</h5></td>
            <td><h5>Earned Weight</h5></td>
            <td><h5>Percentage</h5></td>
          </tr>
        </tbody>
        <tbody data-bind="foreach: { data: categoriesView, as: 'categoryEntry' }">
          <tr>
            <td data-bind="text: categoryEntry.displayName"></td>
            <td style="text-align: center;">
              <span data-bind="text: categoryEntry.earnedPoints"></span>
              /
              <span data-bind="text: categoryEntry.maxPoints"></span>  
            </td>
            <td style="text-align: center;">
              <span data-bind="text: categoryEntry.earnedWeight"></span>
              /
              <span data-bind="text: categoryEntry.weight"></span>
            </td>
            <td>
              <span data-bind="text: categoryEntry.percentage"></span>%
            </td>
          </tr>
        </tbody>
      </table>

      <table>
        <tbody>
          <tr style="text-align: center;">
            <td><h5>Category</h5></td>
            <td><h5>Assignment Name</h5></td>
            <td><h5>Score</h5></td>
            <td><h5>Points</h5></td>
            <td><h5>Percentage</h5></td>
          </tr>
        </tbody>
        <tbody data-bind="foreach: { data: assignmentView, as: 'gradeEntry' }">
          <tr>
            <td data-bind="text: gradeEntry.categoryName"></td>
            <td data-bind="text: gradeEntry.name"></td>
            <td style="text-align: center;">
              <span data-bind="with: $root.getGrade(gradeEntry.assignmentId)">
                <input data-bind="textInput: grade, visible: $root.isEditing">
                <span data-bind="text: grade, visible: !$root.isEditing()"></span>
              </span>
              /
              <span data-bind="text: gradeEntry.maxScore"></span>
            </td>
            <td style="text-align: center;">
              <span data-bind="text: gradeEntry.earnedPoints"></span>/<span data-bind="text: gradeEntry.points"></span>
            </td>
            <td style="text-align: end;">
              <span data-bind="text: gradeEntry.percentage"></span>%
            </td>
          </tr>
        </tbody>
      </table>
      <button data-bind="visible: isEditing, click: update">Update!</button>
      <button data-bind="text: btnEditText, click: toggleEditing"></button>
    </div>
    
    <style>
      table, tr, td {
        border: 1px solid black;
      }
      input {
        width: 30px;
      }
    </style>

    <script src="utils.js"></script>
    <script src="grader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-min.js"></script>
    <script src="test.js"></script>
    <script src="view.js"></script>
  </body>
</html>